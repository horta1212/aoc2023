inputs=[
"1:1g,1b,1r;3g,1b,1r;4g,3b,1r;4g,2b,1r;3b,3g",
"2:9b,7r;5b,6g,1r;2b,10r,9g;3g,14r,5b;8r,3b,4g;8g,14b,10r",
"3:11g,8b,7r;3g,4r,9b;3r,4g,8b;11g,1r,16b",
"4:3b,20g,2r;1g,3r,3b;1b,9g;4r,17g;12g,3r",
"5:2r,1b,4g;6b,2g;2r,5g",
"6:1g,7r;1b,3g,1r;1b,2r,2g;1b,1g,2r;3r;8r,1g,1b",
"7:13g,5b,1r;9g,6b;11g,2b,2r",
"8:2r,11g,6b;5g,3b;3b,3g,5r;5b,9g,1r",
"9:3b,5g,8r;4g,19b,4r;4r,17b",
"10:2g,8r,4b;1g,5r,9b;3g,2r,4b;2g,5r,2b;6g,4b;10b,8g,8r",
"11:3g,1b,9r;2b,1r,9g;1b,9g,7r;8r,6g",
"12:5g;8g,7r,1b;8b,8g,14r;6r,14g;14g,3r,8b",
"13:7r,2g,4b;5r,3b,8g;10g,1r,4b;7g,1r,13b;11g,12b,2r",
"14:9g,4r;7g,4b,5r;2r,2g;3g,2r,8b;7g,6r,8b",
"15:19b,1g;1r,5b;3g,8b;1r,13b,3g",
"16:8r,11b,3g;14g,1r,12b;6g,1r,6b;1r,6b,17g;2g,8b,3r",
"17:3r,1b;1b,2r,1g;1r;3r,2g",
"18:8g,2r;1b,6r;8g,7r,2b;1r;6g,1b,3r",
"19:4b,2g;4g,18b,2r;14g,4b;1r,3b,18g;11b,3r;14g,4r,6b",
"20:7b;1b,6g,1r;1r,3b,10g;7g,4b,1r;6g,6b,1r;1r,5b,17g",
"21:11b,9r;8r,2b;2r,11b,2g",
"22:4g,9b,2r;2b,8g;2g,2r,6b",
"23:7g,7b;6b,11g;1r,14g;15g,4b,1r;1r,5b,3g;1r,1b,13g",
"24:5g,2r,2b;1b,3g,2r;2b,7g,3r",
"25:16r,8g;2r,3b;10g,5r,4b;9r,7g;7r,6b",
"26:3r,1g;5r,1b,10g;8r,5g",
"27:3r,2b;6r,8g;5g,13r,2b;4r,1b,8g;14r,1b,3g;2r,1g,2b",
"28:9r,10b;9r,9b;1g,6r,4b;12b,3g,2r;2g,12r,8b",
"29:4r,15b;5b,3g,6r;1g,9b,1r;5g,8r,1b",
"30:4g,2b,10r;1r,5g,6b;15r,2b;5g,10r,8b",
"31:6g,2b,2r;5g,6r,6b;3b,5r,1g;4g,6r,9b;4r;3g,1r,3b",
"32:8g,17r,17b;11r,6g,13b;14r,1g,1b;1g,17r,4b;5g,14r,15b;15b,8g",
"33:2r,14b;3b,17r,4g;9b,8r;5r,2b;4g,16r,5b;15b,6g,17r",
"34:12g,2r,1b;3b,9r,13g;2b,17g,6r;6g,4r,3b;2r,1b;7g,3b,7r",
"35:4b,5r,5g;6g,12r,6b;3g,18r,2b;13r,6g,9b;3g,10b,17r;1g,3b,16r",
"36:4g,3b,1r;3g,3r,10b;1r,8g,8b;3b,1r;2r,2b,14g",
"37:16b,1g;9b;7r,13b",
"38:6g,8r,3b;5b,4g,6r;5b,4g;5r,3g,1b;6g,4b,15r",
"39:10b,4g;1b,7g,5r;8r,2b",
"40:2b,2g,6r;8g,4r,2b;4b,12g,6r",
"41:4g,2b,11r;6r,11g;4b,2r,19g;3g,2b,1r",
"42:2b,2g,4r;1r,4b,8g;5r,2b,15g;10g,5r,1b;10g,1b;2b",
"43:10r,19g,11b;11g,1r,2b;13r,6b,3g;12r,10g;5r,19g,8b;2r,10g,3b",
"44:7b,8r;1g,12r;19r,3g,5b",
"45:12r;2g,5r,3b;10g,2b,4r;10g,7r",
"46:4b,4r,2g;7g,6b;6b,1r,4g",
"47:4g,8r,1b;4g,1b,11r;14r,3b,10g;15g,2b,7r",
"48:6b,3g,1r;15b,11r,3g;17b,14r;2g,13r;5r,2g,4b",
"49:7b,1g;8r,2b,1g;1r,1g,2b;3r,2b,1g",
"50:13r,2g,2b;13r,6g,1b;12r,8g;1r,3g;13r;2b,11r,2g",
"51:7g,4b,2r;3r,7g,5b;10g,2b;14g,3r,4b;2b,2r,10g",
"52:7b,10r;7r,4b,8g;12r,4b,7g;7g,7r;17g,11b,6r;8g,8r,18b",
"53:6g,2r;10r,13g;2b,3g,5r;4r,4g;8g,1r;13g,2b,10r",
"54:5r,9g,5b;6r,15g,10b;8b,3g,1r;12b,3r,13g",
"55:10g,4r,2b;2g,1r,2b;2b,4r,8g;5b,3g",
"56:7g,9r,2b;4r,1b,3g;3r,4b,6g;7g,2r;5b,2r,3g;7g,7r,5b",
"57:11b,5g,6r;18r,15g,10b;5g,14r,6b;1g,11r,7b;11b,7r,12g",
"58:9r,6b,6g;6b,12r,3g;8r,1b,20g;3g,3r,15b;4b,15g,3r",
"59:18r,4b,7g;11b,19r,7g;10r,9b,1g;8r,12g,4b;6g,5b,12r;2b,14g,2r",
"60:1b,9g,6r;1r,1b,13g;15g,4r;1b,2r,15g",
"61:9g,3r,2b;1g,5b,10r;17r,9g,5b;10r,5g,5b",
"62:4r,2g;2r;5r,2g,2b;3g,1b;2b,3r,3g",
"63:4r,6b,2g;3g,1r,5b;7b,5g",
"64:8b,12r;1g,6r,14b;12r,13b",
"65:2r,8g;1b,2r,5g;2b,3g;1g,1r",
"66:6r,8b,2g;6b,7g;7g,11b;5g,4r,10b;5b,4g;6b,6g,5r",
"67:12g,4r;2b,11g,6r;9r,2g,6b;2r,8b,18g;17g,7b,6r;12b,9g",
"68:3r,9b,1g;3g,11b;12b,9r;6r,13g,8b",
"69:3r,8g,3b;6g,3r;11g,3b;4r,3g;7g,4b,6r;1r,2b",
"70:6g,4b;7r,9g,14b;12r;9g,10r;6g,16b,8r",
"71:4b,6r,9g;6g,2r;8g,4b,2r;1r,3b,8g;9g,3r,3b;4r,6g",
"72:3r,3g,3b;4r,1g,3b;2r,2g,1b",
"73:7g,6r,7b;2g,4b;2b,15g,4r;1b,4g,2r;7b,14g",
"74:4g,2r,2b;9b,13g,4r;10g,12b,7r;4b,8g,7r",
"75:3r,3g;3g,12r;18r,2b;3g,9r,1b;14r,1g;15r",
"76:1b,7r,8g;3b,4r,1g;6g,6r",
"77:2g,8r;5g,11r,1b;5r,2b,2g;6r,5g,2b;11r,2g,1b;2r,8g,2b",
"78:1b,4r,10g;13g,4r,9b;12g,6b,3r;5b,8g,6r",
"79:9r,1b,17g;9g,6r;15g,1b,9r;1b,8r,12g;11g,1b,1r",
"80:3r,3b,1g;1b,8g;10g,16b",
"81:15b,2r;1r,8b;2g,7r,11b;19b,8r,2g;20r,19b",
"82:3r,17b,9g;10r,2g,17b;13r,3b,10g;11r,10g,18b;1g,12b,9r;3r,10b,8g",
"83:4g,2b,14r;7r,2b,7g;16r,7g;16r,2g;3b,4g,15r;6r,1b,4g",
"84:4b,1g,2r;7b,6r;1b,4r,3g",
"85:5b,1r,4g;14b,7g;9b,1r,7g;15b,9g;8b,6g,1r",
"86:12r,12b,7g;16r,11g,4b;14b,8g,8r;2b,15r,6g;1g,6r,5b;11b,9g",
"87:4b,2g,6r;8r,3g,5b;10r,1g;1g,3b,1r",
"88:2g,2r,4b;4b,4g,12r;2g,3b,4r;2g,2b,12r;4b,8r,2g",
"89:13b,1r,5g;8g,16b,5r;12g,2r,18b",
"90:7r,11b,1g;8g,13b;7g,16b;5g,13r,11b;5b,10g,3r",
"91:1b;1b,3g;1g,2r",
"92:16r,4b,14g;15r,7b,13g;7g,13r,8b;4b,9r,5g;6r,7b,8g;14g,7r,10b",
"93:2r,6b,7g;8g,3r,10b;1g,4r;2r,2g;8b,7g",
"94:2g,3b,5r;10b;1g,7r;3b,1g,12r",
"95:13b,5r;9b,3r,7g;10g,4r,12b;14b;7g,2b,1r",
"96:5r,2b;4r;1g,2b",
"97:9r,10g,3b;2g,15r,1b;2b,16g,16r;8g,14r;16r",
"98:18g,16r,1b;3r,2b,20g;1b,20g,14r;14r,2g",
"99:7r,9g,5b;6b,1g;4g,5b,1r;8g,6r,7b;1b,2r,9g",
"100:10b,2r;7g,20b,9r;8r,6g,2b",
]

''' 
# Vim data preprocessing:
:%s/red/r/g
:%s/blue/b/g
:%s/green/g/g
:%s/Game //
:%s/ //g
'''

max_r = 12
max_g = 13
max_b = 14
running_total_ids = 0
running_total_p2  = 0
for row in inputs:
    game_id, games_str = row.split(':')
    games = games_str.split(';')
    reds, blues, greens = [], [], []
    for game in games:
        cubes = game.split(',')
        for cube in cubes:
            if 'r' in cube:
                reds.append(int(cube.replace('r','')))
            if 'b' in cube:
                blues.append(int(cube.replace('b','')))
            if 'g' in cube:
                greens.append(int(cube.replace('g','')))
    
    if max(reds) <= max_r and max(blues) <= max_b and max(greens) <= max_g:
        running_total_ids+=int(game_id)
    running_total_p2 += max(reds) * max(blues) * max(greens)

print("P1: ", running_total_ids)
print("P2: ", running_total_p2)






